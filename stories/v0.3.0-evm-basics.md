# Story: v0.3.0 EVM Basics

> å®ç° EVM é“¾çš„åŸºç¡€ RPC é›†æˆï¼šä½™é¢æŸ¥è¯¢ã€è½¬è´¦åŠŸèƒ½ï¼Œæ”¯æŒå¤šé“¾ï¼ˆEthereumã€Avalanche C-Chainã€BNB Chain ç­‰ï¼‰ã€‚

## Goals
- é›†æˆ zabi åº“ä½œä¸º EVM äº¤äº’ä¾èµ–
- å®ç° EVM é“¾ä½™é¢æŸ¥è¯¢å·¥å…· (get_evm_balance)
- å®ç° EVM é“¾ ETH/åŸç”Ÿä»£å¸è½¬è´¦å·¥å…· (evm_transfer)
- æ”¯æŒå¤šç½‘ç»œé…ç½®ï¼ˆmainnet/testnetï¼‰
- å¤ç”¨ Solana çš„å¯†é’¥ç®¡ç†æ¨¡å¼

## Acceptance Criteria

### Dependencies Integration
- [x] æ·»åŠ  zabi ä½œä¸ºæ„å»ºä¾èµ–
- [x] æ›´æ–° build.zig é…ç½®æ¨¡å—å¯¼å…¥
- [x] åˆå§‹åŒ– EVM runtime (std.Io.Threaded)
- [x] éªŒè¯ Zig 0.16 å…¼å®¹æ€§

### EVM RPC Client (via zabi)
- [x] HTTP Provider è¿æ¥
- [x] æ”¯æŒ getAddressBalanceï¼ˆnative tokenï¼‰
- [x] æ”¯æŒ sendRawTransaction
- [x] æ”¯æŒ waitForTransactionReceipt
- [x] æ”¯æŒ getGasPrice / estimateGas
- [x] å¯é…ç½® RPC endpointï¼ˆå¤šé“¾æ”¯æŒï¼‰

### Wallet/Signing (via zabi)
- [x] ä»ç§é’¥åˆ›å»º Wallet
- [x] ä»æ–‡ä»¶åŠ è½½ç§é’¥ï¼ˆç±»ä¼¼ Solana æ¨¡å¼ï¼‰
- [x] æ”¯æŒ EIP-1559 äº¤æ˜“ç­¾å
- [x] æ”¯æŒ Legacy äº¤æ˜“ç­¾å

### Tools Implementation
- [x] `tools/evm_balance.zig` å®ç° EVM ä½™é¢æŸ¥è¯¢
  - å‚æ•°: chain, address, network
  - è¿”å›: balance (wei), balance (ETH/native)
- [x] `tools/evm_transfer.zig` å®ç°åŸç”Ÿä»£å¸è½¬è´¦
  - å‚æ•°: to_address, amount, network, chain, keypair_path (optional)
  - è¿”å›: tx_hash, tx details
- [x] `tools/registry.zig` æ³¨å†Œæ–°å·¥å…·

### Multi-Chain Configuration
- [x] Ethereum: mainnet, sepolia, goerli
- [x] Avalanche C-Chain: mainnet, fuji
- [x] BNB Chain: mainnet, testnet
- [x] æ”¯æŒè‡ªå®šä¹‰ RPC endpoint

### Configuration
- [x] æ”¯æŒ EVM_PRIVATE_KEY ç¯å¢ƒå˜é‡
- [x] æ”¯æŒ ~/.config/evm/keyfile.json é…ç½®æ–‡ä»¶
- [x] æ”¯æŒ network å‚æ•°é…ç½® RPC endpoint

### Testing
- [x] get_evm_balance åœ¨æœ¬åœ° Anvil ä¸ŠéªŒè¯
- [x] evm_transfer åœ¨æœ¬åœ° Anvil ä¸ŠéªŒè¯
- [ ] å¤šé“¾åˆ‡æ¢æµ‹è¯•

## Technical Notes

### zabi Library
- GitHub: https://github.com/Raiden1411/zabi
- åŠŸèƒ½ï¼šEVM RPCã€ABI ç¼–è§£ç ã€äº¤æ˜“ç­¾åã€Wallet ç®¡ç†
- æ”¯æŒ HTTP/WebSocket/IPC è¿æ¥

### EVM RPC Endpoints
```
Ethereum:
- Mainnet: https://eth.llamarpc.com æˆ– Infura/Alchemy
- Sepolia: https://rpc.sepolia.org

Avalanche C-Chain:
- Mainnet: https://api.avax.network/ext/bc/C/rpc
- Fuji: https://api.avax-test.network/ext/bc/C/rpc

BNB Chain:
- Mainnet: https://bsc-dataseed.binance.org
- Testnet: https://data-seed-prebsc-1-s1.binance.org:8545
```

### Key zabi APIs
```zig
// Provider
const provider = try HttpProvider.init(.{ .uri = endpoint });
const balance = try provider.getAddressBalance(.{ .address = addr });

// Wallet
const wallet = Wallet.init(private_key, allocator, &provider);
const tx_hash = try wallet.sendTransaction(.{ .to = recipient, .value = amount });
const receipt = try wallet.waitForTransactionReceipt(tx_hash);
```

### Private Key Format
EVM ç§é’¥ä¸º 32 å­—èŠ‚åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆ64 ä¸ªå­—ç¬¦ï¼Œå¯å¸¦ 0x å‰ç¼€ï¼‰

## Dependencies
- zabi: EVM RPC client, transaction builder, wallet

## Completion Status
- Start date: 2026-01-23
- Completion date: -
- Status: ğŸ”¨ In Progress
