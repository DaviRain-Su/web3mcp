# Story: v0.4.1 dFlow Complete API Integration

> Integrate dFlow protocol for Solana swap and prediction market operations.

## Goals
- Add dFlow imperative swap API (precise route control)
- Add dFlow declarative swap API (intent-based, deferred routing)
- Add dFlow order and utility APIs
- Add dFlow Prediction Market Metadata API
- Provide alternative swap source to Jupiter

## API Reference
- Swap API Base URL: `https://quote-api.dflow.net`
- Prediction Market Metadata API Base URL: `https://prediction-market-metadata-api.dflow.net`
- Auth: `x-api-key` header (via `DFLOW_API_KEY` env var)
- Docs: 
  - Swap: https://pond.dflow.net/swap-api-reference/introduction
  - Prediction Market: https://pond.dflow.net/prediction-market-metadata-api-reference/introduction

## Acceptance Criteria

### Endpoints (core/endpoints.zig)
- [x] Add dFlow Swap API endpoints
- [x] Add dFlow Prediction Market Metadata API endpoints

### Imperative Swap (precise route control)
- [x] `get_quote.zig` - GET /quote
- [x] `swap.zig` - POST /swap
- [x] `swap_instructions.zig` - POST /swap-instructions

### Declarative Swap (intent-based)
- [x] `get_intent.zig` - GET /intent
- [x] `submit_intent.zig` - POST /submit-intent

### Order API
- [x] `get_order.zig` - GET /order
- [x] `get_order_status.zig` - GET /order-status

### Token API
- [x] `get_tokens.zig` - GET /tokens
- [x] `get_tokens_with_decimals.zig` - GET /tokens-with-decimals

### Venue API
- [x] `get_venues.zig` - GET /venues

### Prediction Market Swap
- [x] `prediction_market_init.zig` - POST /prediction-market-init

### Prediction Market Metadata - Events
- [x] `prediction/get_events.zig` - GET /events
- [x] `prediction/get_event.zig` - GET /events/{ticker}

### Prediction Market Metadata - Markets
- [x] `prediction/get_markets.zig` - GET /markets
- [x] `prediction/get_market.zig` - GET /markets/{ticker}
- [x] `prediction/get_market_by_mint.zig` - GET /markets/by-mint/{mint}
- [x] `prediction/get_outcome_mints.zig` - GET /markets/outcome-mints

### Prediction Market Metadata - Orderbook
- [x] `prediction/get_orderbook.zig` - GET /orderbook/{ticker}
- [x] `prediction/get_orderbook_by_mint.zig` - GET /orderbook/by-mint/{mint}

### Prediction Market Metadata - Trades
- [x] `prediction/get_trades.zig` - GET /trades

### Prediction Market Metadata - Series
- [x] `prediction/get_series.zig` - GET /series

### Prediction Market Metadata - Search & Live Data
- [x] `prediction/search_events.zig` - GET /search
- [x] `prediction/get_live_data.zig` - GET /live-data

### Integration
- [x] `tools/solana/defi/dflow/registry.zig` - dFlow tool exports
- [x] `tools/solana/defi/dflow/prediction/registry.zig` - Prediction market exports
- [x] `tools/solana/registry.zig` - register all dFlow tools
- [x] Build passes with `zig build`

### Documentation
- [ ] README.zig-0.16.md updated with dFlow tools
- [x] CHANGELOG.md session entry added

## Tool Count
- **Swap API**: 11 tools
- **Prediction Market Metadata API**: 12 tools
- **Total dFlow tools**: 23

## Completion Status
- Start date: 2026-01-24
- Completion date: 2026-01-24
- Status: âœ… Completed
